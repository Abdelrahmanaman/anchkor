import{I as ce,Y as le,o as fe}from"./main-CmErNaLo.js";let b=[],E=0;const $=4;let L=e=>{let t=[],r={get(){return r.lc||r.listen(()=>{})(),r.value},lc:0,listen(n){return r.lc=t.push(n),()=>{for(let a=E+$;a<b.length;)b[a]===n?b.splice(a,$):a+=$;let s=t.indexOf(n);~s&&(t.splice(s,1),--r.lc||r.off())}},notify(n,s){let a=!b.length;for(let o of t)b.push(o,r.value,n,s);if(a){for(E=0;E<b.length;E+=$)b[E](b[E+1],b[E+2],b[E+3]);b.length=0}},off(){},set(n){let s=r.value;s!==n&&(r.value=n,r.notify(s))},subscribe(n){let s=r.listen(n);return n(r.value),s},value:e};return r};const de=5,z=6,q=10;let he=(e,t,r,n)=>(e.events=e.events||{},e.events[r+q]||(e.events[r+q]=n(s=>{e.events[r].reduceRight((a,o)=>(o(a),a),{shared:{},...s})})),e.events[r]=e.events[r]||[],e.events[r].push(t),()=>{let s=e.events[r],a=s.indexOf(t);s.splice(a,1),s.length||(delete e.events[r],e.events[r+q](),delete e.events[r+q])}),ge=1e3,ye=(e,t)=>he(e,n=>{let s=t(n);s&&e.events[z].push(s)},de,n=>{let s=e.listen;e.listen=(...o)=>(!e.lc&&!e.active&&(e.active=!0,n()),s(...o));let a=e.off;return e.events[z]=[],e.off=()=>{a(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let o of e.events[z])o();e.events[z]=[]}},ge)},()=>{e.listen=s,e.off=a}});var me=Object.defineProperty,ve=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,G=(e,t,r)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_=(e,t)=>{for(var r in t||(t={}))we.call(t,r)&&G(e,r,t[r]);if(V)for(var r of V(t))be.call(t,r)&&G(e,r,t[r]);return e},T=(e,t)=>ve(e,pe(t)),_e=class extends Error{constructor(e,t,r){super(t||e.toString(),{cause:r}),this.status=e,this.statusText=t,this.error=r}},Re=async(e,t)=>{var r,n,s,a,o,u;let l=t||{};const i={onRequest:[t==null?void 0:t.onRequest],onResponse:[t==null?void 0:t.onResponse],onSuccess:[t==null?void 0:t.onSuccess],onError:[t==null?void 0:t.onError],onRetry:[t==null?void 0:t.onRetry]};if(!t||!(t!=null&&t.plugins))return{url:e,options:l,hooks:i};for(const c of(t==null?void 0:t.plugins)||[]){if(c.init){const d=await((r=c.init)==null?void 0:r.call(c,e.toString(),t));l=d.options||l,e=d.url}i.onRequest.push((n=c.hooks)==null?void 0:n.onRequest),i.onResponse.push((s=c.hooks)==null?void 0:s.onResponse),i.onSuccess.push((a=c.hooks)==null?void 0:a.onSuccess),i.onError.push((o=c.hooks)==null?void 0:o.onError),i.onRetry.push((u=c.hooks)==null?void 0:u.onRetry)}return{url:e,options:l,hooks:i}},Q=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}},Te=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}};function Se(e){if(typeof e=="number")return new Q({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new Q(e);case"exponential":return new Te(e);default:throw new Error("Invalid retry strategy")}}var Oe=async e=>{const t={},r=async n=>typeof n=="function"?await n():n;if(e!=null&&e.auth){if(e.auth.type==="Bearer"){const n=await r(e.auth.token);if(!n)return t;t.authorization=`Bearer ${n}`}else if(e.auth.type==="Basic"){const n=r(e.auth.username),s=r(e.auth.password);if(!n||!s)return t;t.authorization=`Basic ${btoa(`${n}:${s}`)}`}else if(e.auth.type==="Custom"){const n=r(e.auth.value);if(!n)return t;t.authorization=`${r(e.auth.prefix)} ${n}`}}return t},Pe=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Ee(e){const t=e.headers.get("content-type"),r=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!t)return"json";const n=t.split(";").shift()||"";return Pe.test(n)?"json":r.has(n)||n.startsWith("text/")?"text":"blob"}function Ae(e){try{return JSON.parse(e),!0}catch{return!1}}function K(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}function Y(e){try{return JSON.parse(e)}catch{return e}}function X(e){return typeof e=="function"}function Ue(e){if(e!=null&&e.customFetchImpl)return e.customFetchImpl;if(typeof globalThis<"u"&&X(globalThis.fetch))return globalThis.fetch;if(typeof window<"u"&&X(window.fetch))return window.fetch;throw new Error("No fetch implementation found")}async function Ie(e){const t=new Headers(e==null?void 0:e.headers),r=await Oe(e);for(const[n,s]of Object.entries(r||{}))t.set(n,s);if(!t.has("content-type")){const n=Ne(e==null?void 0:e.body);n&&t.set("content-type",n)}return t}function Ne(e){return K(e)?"application/json":null}function Le(e){if(!(e!=null&&e.body))return null;const t=new Headers(e==null?void 0:e.headers);if(K(e.body)&&!t.has("content-type")){for(const[r,n]of Object.entries(e==null?void 0:e.body))n instanceof Date&&(e.body[r]=n.toISOString());return JSON.stringify(e.body)}return e.body}function xe(e,t){var r;if(t!=null&&t.method)return t.method.toUpperCase();if(e.startsWith("@")){const n=(r=e.split("@")[1])==null?void 0:r.split("/")[0];return te.includes(n)?n.toUpperCase():t!=null&&t.body?"POST":"GET"}return t!=null&&t.body?"POST":"GET"}function je(e,t){let r;return!(e!=null&&e.signal)&&(e!=null&&e.timeout)&&(r=setTimeout(()=>t==null?void 0:t.abort(),e==null?void 0:e.timeout)),{abortTimeout:r,clearTimeout:()=>{r&&clearTimeout(r)}}}var $e=class ee extends Error{constructor(t,r){super(r||JSON.stringify(t,null,2)),this.issues=t,Object.setPrototypeOf(this,ee.prototype)}};async function C(e,t){let r=await e["~standard"].validate(t);if(r.issues)throw new $e(r.issues);return r.value}var te=["get","post","put","patch","delete"],ze=e=>({id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(t,r){var n,s,a,o;const u=((s=(n=e.plugins)==null?void 0:n.find(l=>{var i;return(i=l.schema)!=null&&i.config?t.startsWith(l.schema.config.baseURL||"")||t.startsWith(l.schema.config.prefix||""):!1}))==null?void 0:s.schema)||e.schema;if(u){let l=t;(a=u.config)!=null&&a.prefix&&l.startsWith(u.config.prefix)&&(l=l.replace(u.config.prefix,""),u.config.baseURL&&(t=t.replace(u.config.prefix,u.config.baseURL))),(o=u.config)!=null&&o.baseURL&&l.startsWith(u.config.baseURL)&&(l=l.replace(u.config.baseURL,""));const i=u.schema[l];if(i){let c=T(_({},r),{method:i.method,output:i.output});return r!=null&&r.disableValidation||(c=T(_({},c),{body:i.input?await C(i.input,r==null?void 0:r.body):r==null?void 0:r.body,params:i.params?await C(i.params,r==null?void 0:r.params):r==null?void 0:r.params,query:i.query?await C(i.query,r==null?void 0:r.query):r==null?void 0:r.query})),{url:t,options:c}}}return{url:t,options:r}}}),qe=e=>{async function t(r,n){const s=T(_(_({},e),n),{plugins:[...(e==null?void 0:e.plugins)||[],ze(e||{})]});if(e!=null&&e.catchAllError)try{return await W(r,s)}catch(a){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:a}}}return await W(r,s)}return t};function Ce(e,t){let{baseURL:r,params:n,query:s}=t||{query:{},params:{},baseURL:""},a=e.startsWith("http")?e.split("/").slice(0,3).join("/"):r||"";if(e.startsWith("@")){const d=e.toString().split("@")[1].split("/")[0];te.includes(d)&&(e=e.replace(`@${d}/`,"/"))}a.endsWith("/")||(a+="/");let[o,u]=e.replace(a,"").split("?");const l=new URLSearchParams(u);for(const[d,h]of Object.entries(s||{}))h!=null&&l.set(d,String(h));if(n)if(Array.isArray(n)){const d=o.split("/").filter(h=>h.startsWith(":"));for(const[h,p]of d.entries()){const S=n[h];o=o.replace(p,S)}}else for(const[d,h]of Object.entries(n))o=o.replace(`:${d}`,String(h));o=o.split("/").map(encodeURIComponent).join("/"),o.startsWith("/")&&(o=o.slice(1));let i=l.toString();return i=i.length>0?`?${i}`.replace(/\+/g,"%20"):"",a.startsWith("http")?new URL(`${o}${i}`,a):`${a}${o}${i}`}var W=async(e,t)=>{var r,n,s,a,o,u,l,i;const{hooks:c,url:d,options:h}=await Re(e,t),p=Ue(h),S=new AbortController,I=(r=h.signal)!=null?r:S.signal,m=Ce(d,h),U=Le(h),f=await Ie(h),R=xe(d,h);let y=T(_({},h),{url:m,headers:f,body:U,method:R,signal:I});for(const w of c.onRequest)if(w){const v=await w(y);v instanceof Object&&(y=v)}("pipeTo"in y&&typeof y.pipeTo=="function"||typeof((n=t==null?void 0:t.body)==null?void 0:n.pipe)=="function")&&("duplex"in y||(y.duplex="half"));const{clearTimeout:M}=je(h,S);let g=await p(y.url,y);M();const x={response:g,request:y};for(const w of c.onResponse)if(w){const v=await w(T(_({},x),{response:(s=t==null?void 0:t.hookOptions)!=null&&s.cloneResponse?g.clone():g}));v instanceof Response?g=v:v instanceof Object&&(g=v.response)}if(g.ok){if(!(y.method!=="HEAD"))return{data:"",error:null};const v=Ee(g),O={data:"",response:g,request:y};if(v==="json"||v==="text"){const P=await g.text(),ue=await((a=y.jsonParser)!=null?a:Y)(P);O.data=ue}else O.data=await g[v]();y!=null&&y.output&&y.output&&!y.disableValidation&&(O.data=await C(y.output,O.data));for(const P of c.onSuccess)P&&await P(T(_({},O),{response:(o=t==null?void 0:t.hookOptions)!=null&&o.cloneResponse?g.clone():g}));return t!=null&&t.throw?O.data:{data:O.data,error:null}}const oe=(u=t==null?void 0:t.jsonParser)!=null?u:Y,j=await g.text(),J=Ae(j),B=J?await oe(j):null,ie={response:g,responseText:j,request:y,error:T(_({},B),{status:g.status,statusText:g.statusText})};for(const w of c.onError)w&&await w(T(_({},ie),{response:(l=t==null?void 0:t.hookOptions)!=null&&l.cloneResponse?g.clone():g}));if(t!=null&&t.retry){const w=Se(t.retry),v=(i=t.retryAttempt)!=null?i:0;if(await w.shouldAttemptRetry(v,g)){for(const P of c.onRetry)P&&await P(x);const O=w.getDelay(v);return await new Promise(P=>setTimeout(P,O)),await W(e,T(_({},t),{retryAttempt:v+1}))}}if(t!=null&&t.throw)throw new _e(g.status,g.statusText,J?B:j);return{data:null,error:T(_({},B),{status:g.status,statusText:g.statusText})}},ke={},De={};const k=Object.create(null),N=e=>{var t;return ke||((t=globalThis.Deno)==null?void 0:t.env.toObject())||globalThis.__env__||(e?k:globalThis)},A=new Proxy(k,{get(e,t){return N()[t]??k[t]},has(e,t){const r=N();return t in r||t in k},set(e,t,r){const n=N(!0);return n[t]=r,!0},deleteProperty(e,t){if(!t)return!1;const r=N(!0);return delete r[t],!0},ownKeys(){const e=N(!0);return Object.keys(e)}});function Me(e){return e?e!=="false":!1}const Be=typeof process<"u"&&De&&"production"||"";Be==="test"||Me(A.TEST);const Fe=typeof window>"u",D=(e,t,r,n)=>{const s=L({data:null,error:null,isPending:!0,isRefetching:!1,refetch:()=>a()}),a=()=>{const u=typeof n=="function"?n({data:s.get().data,error:s.get().error,isPending:s.get().isPending}):n;return r(t,{...u,async onSuccess(l){var i;s.set({data:l.data,error:null,isPending:!1,isRefetching:!1,refetch:s.value.refetch}),await((i=u==null?void 0:u.onSuccess)==null?void 0:i.call(u,l))},async onError(l){var h,p;const{request:i}=l,c=typeof i.retry=="number"?i.retry:(h=i.retry)==null?void 0:h.attempts,d=i.retryAttempt||0;c&&d<c||(s.set({error:l.error,data:null,isPending:!1,isRefetching:!1,refetch:s.value.refetch}),await((p=u==null?void 0:u.onError)==null?void 0:p.call(u,l)))},async onRequest(l){var c;const i=s.get();s.set({isPending:i.data===null,data:i.data,error:null,isRefetching:!0,refetch:s.value.refetch}),await((c=u==null?void 0:u.onRequest)==null?void 0:c.call(u,l))}})};e=Array.isArray(e)?e:[e];let o=!1;for(const u of e)u.subscribe(()=>{Fe||(o?a():ye(s,()=>(setTimeout(()=>{a()},0),o=!0,()=>{s.off(),u.off()})))});return s};class re extends Error{constructor(t,r){super(t),this.name="BetterAuthError",this.message=t,this.cause=r,this.stack=""}}function We(e){return{authorize(t,r="AND"){let n=!1;for(const[s,a]of Object.entries(t)){const o=e[s];if(!o)return{success:!1,error:`You are not allowed to access resource: ${s}`};if(Array.isArray(a))n=a.every(u=>o.includes(u));else if(typeof a=="object"){const u=a;u.connector==="OR"?n=u.actions.some(l=>o.includes(l)):n=u.actions.every(l=>o.includes(l))}else throw new re("Invalid access control request");if(n&&r==="OR")return{success:n};if(!n&&r==="AND")return{success:!1,error:`unauthorized to access resource "${s}"`}}return n?{success:n}:{success:!1,error:"Not authorized"}},statements:e}}function He(e){return{newRole(t){return We(t)},statements:e}}const Je={organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"]},H=He(Je),ne=H.newRole({organization:["update"],invitation:["create","cancel"],member:["create","update","delete"],team:["create","update","delete"]}),se=H.newRole({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"]}),ae=H.newRole({organization:[],member:[],invitation:[],team:[]}),Ve={admin:ne,owner:se,member:ae},Ge=e=>{if(!e.permissions&&!e.permission)return!1;const t=e.role.split(","),r=e.options.roles||Ve;for(const n of t){const s=r[n],a=s==null?void 0:s.authorize(e.permissions??e.permission);if(a!=null&&a.success)return!0}return!1},Qe=e=>{const t=L(!1),r=L(!1),n=L(!1),s={admin:ne,member:ae,owner:se,...e==null?void 0:e.roles};return{id:"organization",$InferServerPlugin:{},getActions:a=>({$Infer:{ActiveOrganization:{},Organization:{},Invitation:{},Member:{},Team:{}},organization:{checkRolePermission:o=>Ge({role:o.role,options:{ac:e==null?void 0:e.ac,roles:s},permissions:o.permissions??o.permission})}}),getAtoms:a=>{const o=D(t,"/organization/list",a,{method:"GET"}),u=D([r],"/organization/get-full-organization",a,()=>({method:"GET"})),l=D([n],"/organization/get-active-member",a,{method:"GET"});return{$listOrg:t,$activeOrgSignal:r,$activeMemberSignal:n,activeOrganization:u,listOrganizations:o,activeMember:l}},pathMethods:{"/organization/get-full-organization":"GET"},atomListeners:[{matcher(a){return a==="/organization/create"||a==="/organization/delete"||a==="/organization/update"},signal:"$listOrg"},{matcher(a){return a.startsWith("/organization")},signal:"$activeOrgSignal"},{matcher(a){return a.startsWith("/organization/set-active")},signal:"$sessionSignal"},{matcher(a){return a.includes("/organization/update-member-role")},signal:"$activeMemberSignal"}]}},Ye=()=>({id:"better-auth-client",$InferServerPlugin:{}});function Xe(e){try{return new URL(e).pathname!=="/"}catch{throw new re(`Invalid base URL: ${e}. Please provide a valid base URL.`)}}function F(e,t="/api/auth"){return Xe(e)?e:(t=t.startsWith("/")?t:`/${t}`,`${e.replace(/\/+$/,"")}${t}`)}function Ze(e,t,r){if(e)return F(e,t);const n=A.BETTER_AUTH_URL||A.NEXT_PUBLIC_BETTER_AUTH_URL||A.PUBLIC_BETTER_AUTH_URL||A.NUXT_PUBLIC_BETTER_AUTH_URL||A.NUXT_PUBLIC_AUTH_URL||(A.BASE_URL!=="/"?A.BASE_URL:void 0);if(n)return F(n,t);if(typeof window<"u"&&window.location)return F(window.location.origin,t)}const Ke={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},et=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,Z={true:!0,false:!1,null:null,undefined:void 0,nan:Number.NaN,infinity:Number.POSITIVE_INFINITY,"-infinity":Number.NEGATIVE_INFINITY},tt=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/;function rt(e){return e instanceof Date&&!isNaN(e.getTime())}function nt(e){const t=tt.exec(e);if(!t)return null;const[,r,n,s,a,o,u,l,i,c,d]=t;let h=new Date(Date.UTC(parseInt(r,10),parseInt(n,10)-1,parseInt(s,10),parseInt(a,10),parseInt(o,10),parseInt(u,10),l?parseInt(l.padEnd(3,"0"),10):0));if(i){const p=(parseInt(c,10)*60+parseInt(d,10))*(i==="+"?-1:1);h.setUTCMinutes(h.getUTCMinutes()+p)}return rt(h)?h:null}function st(e,t={}){const{strict:r=!1,warnings:n=!1,reviver:s,parseDates:a=!0}=t;if(typeof e!="string")return e;const o=e.trim();if(o[0]==='"'&&o.endsWith('"')&&!o.slice(1,-1).includes('"'))return o.slice(1,-1);const u=o.toLowerCase();if(u.length<=9&&u in Z)return Z[u];if(!et.test(o)){if(r)throw new SyntaxError("[better-json] Invalid JSON");return e}if(Object.entries(Ke).some(([i,c])=>{const d=c.test(o);return d&&n&&console.warn(`[better-json] Detected potential prototype pollution attempt using ${i} pattern`),d})&&r)throw new Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(o,(c,d)=>{if(c==="__proto__"||c==="constructor"&&d&&typeof d=="object"&&"prototype"in d){n&&console.warn(`[better-json] Dropping "${c}" key to prevent prototype pollution`);return}if(a&&typeof d=="string"){const h=nt(d);if(h)return h}return s?s(c,d):d})}catch(i){if(r)throw i;return e}}function at(e,t={strict:!0}){return st(e,t)}const ot={id:"redirect",name:"Redirect",hooks:{onSuccess(e){var t,r;if((t=e.data)!=null&&t.url&&((r=e.data)!=null&&r.redirect)&&typeof window<"u"&&window.location&&window.location)try{window.location.href=e.data.url}catch{}}}};function it(e){const t=L(!1);return{session:D(t,"/get-session",e,{method:"GET"}),$sessionSignal:t}}const ut=e=>{var p,S,I,m,U;const t="credentials"in Request.prototype,r=Ze(e==null?void 0:e.baseURL,e==null?void 0:e.basePath),n=((p=e==null?void 0:e.plugins)==null?void 0:p.flatMap(f=>f.fetchPlugins).filter(f=>f!==void 0))||[],s=qe({baseURL:r,...t?{credentials:"include"}:{},method:"GET",jsonParser(f){return f?at(f,{strict:!1}):null},customFetchImpl:async(f,R)=>{try{return await fetch(f,R)}catch{return Response.error()}},...e==null?void 0:e.fetchOptions,plugins:e!=null&&e.disableDefaultFetchPlugins?[...((S=e==null?void 0:e.fetchOptions)==null?void 0:S.plugins)||[],...n]:[ot,...((I=e==null?void 0:e.fetchOptions)==null?void 0:I.plugins)||[],...n]}),{$sessionSignal:a,session:o}=it(s),u=(e==null?void 0:e.plugins)||[];let l={},i={$sessionSignal:a,session:o},c={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"};const d=[{signal:"$sessionSignal",matcher(f){return f==="/sign-out"||f==="/update-user"||f.startsWith("/sign-in")||f.startsWith("/sign-up")||f==="/delete-user"||f==="/verify-email"}}];for(const f of u)f.getAtoms&&Object.assign(i,(m=f.getAtoms)==null?void 0:m.call(f,s)),f.pathMethods&&Object.assign(c,f.pathMethods),f.atomListeners&&d.push(...f.atomListeners);const h={notify:f=>{i[f].set(!i[f].get())},listen:(f,R)=>{i[f].subscribe(R)},atoms:i};for(const f of u)f.getActions&&Object.assign(l,(U=f.getActions)==null?void 0:U.call(f,s,h,e));return{pluginsActions:l,pluginsAtoms:i,pluginPathMethods:c,atomListeners:d,$fetch:s,$store:h}};function ct(e,t,r){const n=t[e],{fetchOptions:s,query:a,...o}=r||{};return n||(s!=null&&s.method?s.method:o&&Object.keys(o).length>0?"POST":"GET")}function lt(e,t,r,n,s){function a(o=[]){return new Proxy(function(){},{get(u,l){const i=[...o,l];let c=e;for(const d of i)if(c&&typeof c=="object"&&d in c)c=c[d];else{c=void 0;break}return typeof c=="function"?c:a(i)},apply:async(u,l,i)=>{const c="/"+o.map(f=>f.replace(/[A-Z]/g,R=>`-${R.toLowerCase()}`)).join("/"),d=i[0]||{},h=i[1]||{},{query:p,fetchOptions:S,...I}=d,m={...h,...S},U=ct(c,r,d);return await t(c,{...m,body:U==="GET"?void 0:{...I,...(m==null?void 0:m.body)||{}},query:p||(m==null?void 0:m.query),method:U,async onSuccess(f){var g;await((g=m==null?void 0:m.onSuccess)==null?void 0:g.call(m,f));const R=s==null?void 0:s.find(x=>x.matcher(c));if(!R)return;const y=n[R.signal];if(!y)return;const M=y.get();setTimeout(()=>{y.set(!M)},10)}})}})}return a()}function ft(e){return e.charAt(0).toUpperCase()+e.slice(1)}function dt(e){const t=e.listen(()=>{}),[r,n]=ce({value:e.get()}),s=e.subscribe(a=>{n("value",le(a))});return fe(()=>s()),t(),()=>r.value}function ht(e){return`use${ft(e)}`}function gt(e){const{pluginPathMethods:t,pluginsActions:r,pluginsAtoms:n,$fetch:s,atomListeners:a}=ut(e);let o={};for(const[i,c]of Object.entries(n))o[ht(i)]=()=>dt(c);const u={...r,...o};return lt(u,s,t,n,a)}var yt={};const mt=gt({baseURL:yt.BETTER_AUTH_URL,plugins:[Ye(),Qe()]}),{signIn:wt,signOut:bt,signUp:_t,getAccessToken:Rt,useSession:Tt,token:St,organization:Ot}=mt;export{wt as a,Ot as o,_t as s};
