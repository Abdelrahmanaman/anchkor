import{s as C,l,t as c,r as y,m as I,v as w,i as S,D as x,B as $,n as d,d as n,j as _,S as z,C as F,p as L,F as q,q as E,a4 as P,z as R}from"./main-Dn08EaJy.js";import{u as k,a as B,b as h}from"./zero-app-CdYV702a.js";import{C as N,a as j,b as D,c as H,d as M}from"./card-CZU5oDAw.js";import{l as T}from"./cn-BW4RVDli.js";var A=c("<textarea data-slot=textarea>");function Q(a){const[e,o]=C(a,["class"]);return(()=>{var s=l(A);return y(s,I({get class(){return T("field-sizing-content flex min-h-16 w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs outline-none transition-[color,box-shadow] placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 md:text-sm dark:bg-input/30 dark:aria-invalid:ring-destructive/40",e.class)}},o),!1,!1),w(),s})()}var V=c('<div class="iconify solar--map-arrow-right-bold-duotone -rotate-45 size-5 text-indigo-800"aria-hidden=true>'),Z=c("<div class=relative><!$><!/><!$><!/>");function G(){const[a,e]=S(""),o=()=>!!a(),s=x({from:"/_layout/$workspaceId/$feedbackId"}),u=k();function g(){u().mutate.comment.add({feedbackId:s().feedbackId,message:a()}),e("")}return(()=>{var m=l(Z),v=m.firstChild,[t,r]=$(v.nextSibling),i=t.nextSibling,[p,f]=$(i.nextSibling);return d(m,n(Q,{onInput:b=>e(b.target.value),get value(){return a()},class:"h-32 placeholder:text-lg",placeholder:"Leave your comment..."}),t,r),d(m,n(B,{get disabled(){return!o()},class:"absolute right-2 bottom-2 flex items-center",onClick:g,get children(){return["Send",l(V)]}}),p,f),m})()}var J=c("<div><!$><!/><div>");function K(a){return(()=>{var e=l(J),o=e.firstChild,[s,u]=$(o.nextSibling),g=s.nextSibling;return d(e,()=>a.comment.message,s,u),d(g,()=>a.comment.user.name),e})()}var O=c('<button type=button class=" flex cursor-pointer items-center gap-1 rounded-lg border border-border px-1 hover:bg-accent"><div></div><span>'),U=c('<div class="flex items-center gap-1 rounded-lg border border-border px-1"><div class="iconify solar--chat-square-bold-duotone size-5"></div><span>'),W=c("<div>");function X(){const a=x({from:"/_layout/$workspaceId/$feedbackId"}),e=k(),[o]=h(()=>e().query.feedback.where("id","=",a().feedbackId).related("user").related("likes").related("comments",t=>t.related("user").orderBy("createdAt","desc")).one(),{ttl:"1d"}),[s]=h(()=>e().query.like.where("feedbackId","=",a().feedbackId).where("userId","=",e().userID).one(),{ttl:"1d"}),u=_(()=>!!s()),g=_(()=>{var t,r;return((r=(t=o())==null?void 0:t.likes)==null?void 0:r.length)??0});function m(){e().mutate.like.add(a().feedbackId)}function v(){const t=s();t&&e().mutate.like.remove({likeId:t.id})}return n(z,{get when(){return o()},children:t=>[n(N,{get children(){return[n(j,{get children(){return n(D,{get children(){return t().title}})}}),n(H,{get children(){return t().message}}),n(M,{class:"flex justify-end gap-2",get children(){return[(()=>{var r=l(O),i=r.firstChild,p=i.nextSibling;return F(r,"click",u()?v:m),d(p,g),L(()=>E(i,`iconify solar--heart-angle-bold size-5 ${u()?" text-destructive":""}`)),r})(),(()=>{var r=l(U),i=r.firstChild,p=i.nextSibling;return d(p,()=>{var f,b;return((b=(f=t())==null?void 0:f.comments)==null?void 0:b.length)??0}),r})()]}})]}}),n(G,{}),(()=>{var r=l(W);return d(r,n(q,{get each(){return t().comments},children:i=>n(K,{comment:i})})),r})()]})}var Y=c('<section class="h-full w-full pt-3">');R("src_routes_layout_workspaceId_feedbackId_tsx--getd_createServerFn_handler","/_serverFn");const ne=function(){return P.useParams(),(()=>{var e=l(Y);return d(e,n(X,{})),e})()};export{ne as component};
