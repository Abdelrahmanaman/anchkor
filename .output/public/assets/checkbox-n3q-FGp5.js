import{s as v,j as y,k as M,D as L,c as s,e as h,f as F,S as $,u as z,n as A,h as G,l as H,B,W as J,m as U,g as W,t as Q}from"./main-CmErNaLo.js";import{m as I,G as V,P as R,e as k,E as X,d as Y,J as Z,_ as ee,h as te}from"./cn-D_CxhGnA.js";import{c as re}from"./VI7QYH27-Ce7N4JMG.js";import{u as P,F as ne,f as oe,g as se,h as ae,i as ce,j as ie,k as le,l as de,m as ue}from"./createForm-BrJZw8Zw.js";import{c as he,s as ge}from"./index-BKXlvzJI.js";var fe={};ee(fe,{Checkbox:()=>N,Control:()=>D,Description:()=>q,ErrorMessage:()=>E,Indicator:()=>S,Input:()=>_,Label:()=>O,Root:()=>K,useCheckboxContext:()=>m});var j=A();function m(){const r=z(j);if(r===void 0)throw new Error("[kobalte]: `useCheckboxContext` must be used within a `Checkbox` component");return r}function D(r){const t=P(),e=m(),n=I({id:e.generateId("control")},r),[o,c]=v(n,["onClick","onKeyDown"]);return s(R,h({as:"div",onClick:i=>{var l;k(i,o.onClick),e.toggle(),(l=e.inputRef())==null||l.focus()},onKeyDown:i=>{var l;k(i,o.onKeyDown),i.key===X.Space&&(e.toggle(),(l=e.inputRef())==null||l.focus())}},()=>t.dataset(),()=>e.dataset(),c))}function q(r){const t=m();return s(ue,h(()=>t.dataset(),r))}function E(r){const t=m();return s(ae,h(()=>t.dataset(),r))}function S(r){const t=P(),e=m(),[n,o]=y(),c=I({id:e.generateId("indicator")},r),[g,p]=v(c,["ref","forceMount"]),{present:i}=ge({show:()=>g.forceMount||e.indeterminate()||e.checked(),element:()=>n()??null});return s($,{get when(){return i()},get children(){return s(R,h({as:"div",ref(l){var f=F(o,g.ref);typeof f=="function"&&f(l)}},()=>t.dataset(),()=>e.dataset(),p))}})}function _(r){let t;const e=P(),n=m(),o=I({id:n.generateId("input")},r),[c,g,p]=v(o,["ref","style","onChange","onFocus","onBlur"],ne),{fieldProps:i}=oe(g),[l,f]=y(!1),b=a=>{if(k(a,c.onChange),a.stopPropagation(),!l()){const u=a.target;n.setIsChecked(u.checked),u.checked=n.checked()}f(!1)},C=a=>{k(a,c.onFocus),n.setIsFocused(!0)},w=a=>{k(a,c.onBlur),n.setIsFocused(!1)};return M(L([()=>n.checked(),()=>n.value()],()=>{f(!0),t==null||t.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),t==null||t.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))},{defer:!0})),M(L([()=>t,()=>n.indeterminate(),()=>n.checked()],([a,u])=>{a&&(a.indeterminate=u)})),s(R,h({as:"input",ref(a){var u=F(d=>{n.setInputRef(d),t=d},c.ref);typeof u=="function"&&u(a)},type:"checkbox",get id(){return i.id()},get name(){return e.name()},get value(){return n.value()},get checked(){return n.checked()},get required(){return e.isRequired()},get disabled(){return e.isDisabled()},get readonly(){return e.isReadOnly()},get style(){return he(V,c.style)},get"aria-label"(){return i.ariaLabel()},get"aria-labelledby"(){return i.ariaLabelledBy()},get"aria-describedby"(){return i.ariaDescribedBy()},get"aria-invalid"(){return e.validationState()==="invalid"||void 0},get"aria-required"(){return e.isRequired()},get"aria-disabled"(){return e.isDisabled()},get"aria-readonly"(){return e.isReadOnly()},onChange:b,onFocus:C,onBlur:w},()=>e.dataset(),()=>n.dataset(),p))}function O(r){const t=m();return s(se,h(()=>t.dataset(),r))}function K(r){let t;const e=`checkbox-${G()}`,n=I({value:"on",id:e},r),[o,c,g]=v(n,["ref","children","value","checked","defaultChecked","indeterminate","onChange","onPointerDown"],ce),[p,i]=y(),[l,f]=y(!1),{formControlContext:b}=ie(c),C=re({isSelected:()=>o.checked,defaultIsSelected:()=>o.defaultChecked,onSelectedChange:d=>{var x;return(x=o.onChange)==null?void 0:x.call(o,d)},isDisabled:()=>b.isDisabled(),isReadOnly:()=>b.isReadOnly()});le(()=>t,()=>C.setIsSelected(o.defaultChecked??!1));const w=d=>{k(d,o.onPointerDown),l()&&d.preventDefault()},a=H(()=>({"data-checked":C.isSelected()?"":void 0,"data-indeterminate":o.indeterminate?"":void 0})),u={value:()=>o.value,dataset:a,checked:()=>C.isSelected(),indeterminate:()=>o.indeterminate??!1,inputRef:p,generateId:Y(()=>B(c.id)),toggle:()=>C.toggle(),setIsChecked:d=>C.setIsSelected(d),setIsFocused:f,setInputRef:i};return s(de.Provider,{value:b,get children(){return s(j.Provider,{value:u,get children(){return s(R,h({as:"div",ref(d){var x=F(T=>t=T,o.ref);typeof x=="function"&&x(d)},role:"group",get id(){return B(c.id)},onPointerDown:w},()=>b.dataset(),a,g,{get children(){return s(Ce,{state:u,get children(){return o.children}})}}))}})}})}function Ce(r){const t=J(()=>{const e=r.children;return Z(e)?e(r.state):e});return U(t)}var N=Object.assign(K,{Control:D,Description:q,ErrorMessage:E,Indicator:S,Input:_,Label:O}),me=Q('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=3 stroke-linecap=round stroke-linejoin=round class=size-4><title>Check</title><path d="M5 12l5 5l10 -10">');const ye=r=>{const[t,e]=v(r,["class","checked","label","error"]);return s(N,h({get class(){return te("items-top group relative flex items-center gap-1",t.class)}},e,{get children(){return[s(_,{}),s(D,{class:"flex size-4 items-center justify-center rounded-sm border border-input p-px data-[checked]:bg-secondary",get children(){return s(S,{get children(){return W(me)}})}}),s(O,{get children(){return t.label}}),s($,{get when(){return t.error},get children(){return s(E,{get children(){return t.error}})}})]}}))};export{ye as C};
